{"ast":null,"code":"import React,{useContext,useState}from'react';import\"../Login-popup/Login.css\";import{assets}from'../../assets/assets';import{StoreContext}from'../../context/Storecontext';import axios from'axios';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{setShowlogin}=_ref;const{url,setToken}=useContext(StoreContext);const[currentState,setCurrentState]=useState(\"Sign Up\");const[data,setData]=useState({name:\"\",email:\"\",password:\"\"});const onChangeHandler=e=>{const{name,value}=e.target;setData(prevData=>({...prevData,[name]:value}));};const onLogin=async event=>{event.preventDefault();let newUrl=url;if(currentState==='Login'){// Compare with string 'Login'\nnewUrl+=\"/api/user/login\";}else{newUrl+=\"/api/user/register\";}const response=await axios.post(newUrl,data);if(response.data.success){setToken(response.data.token);localStorage.setItem(\"token\",response.data.token);setShowlogin(false);}else{toast.error(response.data.message);}};return/*#__PURE__*/_jsx(\"div\",{className:\"login-popup\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onLogin,className:\"login-popup-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login-popup-title\",children:[/*#__PURE__*/_jsx(\"h2\",{children:currentState}),/*#__PURE__*/_jsx(\"img\",{onClick:()=>setShowlogin(false),src:assets.cross_icon,alt:\"\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-popup-inputs\",children:[currentState==='Login'?null:/*#__PURE__*/_jsx(\"input\",{name:\"name\",onChange:onChangeHandler,value:data.name,type:\"text\",placeholder:\"your name\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",onChange:onChangeHandler,value:data.email,type:\"email\",placeholder:\"your email\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",onChange:onChangeHandler,value:data.password,type:\"password\",placeholder:\"your password \",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:currentState===\"Sign Up\"?\"Create Account\":\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-popup-condition\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",required:true}),/*#__PURE__*/_jsx(\"p\",{children:\"By continuing, I agree to the terms of use & privacy policy\"})]}),currentState==='Login'?/*#__PURE__*/_jsxs(\"p\",{children:[\"Create a new Account? \",/*#__PURE__*/_jsx(\"span\",{onClick:()=>setCurrentState(\"Sign Up\"),children:\"Click here\"})]}):/*#__PURE__*/_jsxs(\"p\",{children:[\"Already have an account? \",/*#__PURE__*/_jsx(\"span\",{onClick:()=>setCurrentState(\"Login\"),children:\"Login here\"})]})]})});};export default Login;","map":{"version":3,"names":["React","useContext","useState","assets","StoreContext","axios","toast","jsx","_jsx","jsxs","_jsxs","Login","_ref","setShowlogin","url","setToken","currentState","setCurrentState","data","setData","name","email","password","onChangeHandler","e","value","target","prevData","onLogin","event","preventDefault","newUrl","response","post","success","token","localStorage","setItem","error","message","className","children","onSubmit","onClick","src","cross_icon","alt","onChange","type","placeholder","required"],"sources":["C:/Users/bpenchalaiah/Desktop/food app/frontend/src/components/Login-popup/Login.jsx"],"sourcesContent":["import React, { useContext, useState} from 'react';\r\nimport \"../Login-popup/Login.css\";\r\nimport { assets } from '../../assets/assets';\r\nimport { StoreContext } from '../../context/Storecontext';\r\nimport axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\nconst Login = ({ setShowlogin }) => {\r\n  const {url,setToken}=useContext(StoreContext)\r\n  \r\n    const [currentState, setCurrentState] = useState(\"Sign Up\");\r\n    const [data, setData] = useState({\r\n        name: \"\",\r\n        email: \"\",\r\n        password: \"\"\r\n    });\r\n\r\n    const onChangeHandler = (e) => {\r\n        const { name, value } = e.target;\r\n        setData(prevData => ({ ...prevData, [name]: value }));\r\n    };\r\n    const onLogin = async (event) => {\r\n      event.preventDefault();\r\n      let newUrl = url;\r\n      if (currentState === 'Login') { // Compare with string 'Login'\r\n          newUrl += \"/api/user/login\";\r\n      } else {\r\n          newUrl += \"/api/user/register\";\r\n      }\r\n      const response = await axios.post(newUrl, data);\r\n      if (response.data.success) {\r\n          setToken(response.data.token);\r\n          localStorage.setItem(\"token\", response.data.token);\r\n          setShowlogin(false);\r\n          \r\n      } else {\r\n          toast.error(response.data.message);\r\n      }\r\n  };\r\n  \r\n\r\n    return (\r\n        <div className=\"login-popup\">\r\n            <form onSubmit={onLogin} className=\"login-popup-container\">\r\n                <div className=\"login-popup-title\">\r\n                    <h2>{currentState}</h2>\r\n                    <img onClick={() => setShowlogin(false)} src={assets.cross_icon} alt=\"\" />\r\n                </div>\r\n                <div className=\"login-popup-inputs\">\r\n                    {currentState === 'Login' ? null : <input name='name' onChange={onChangeHandler} value={data.name} type='text' placeholder='your name' required />}\r\n                    <input name='email' onChange={onChangeHandler} value={data.email} type='email' placeholder='your email' required />\r\n                    <input name='password' onChange={onChangeHandler} value={data.password} type='password' placeholder='your password ' required />\r\n                </div>\r\n                <button type=\"submit\" >{currentState === \"Sign Up\" ? \"Create Account\" : \"Login\"}</button>\r\n                <div className=\"login-popup-condition\">\r\n                    <input type='checkbox' required />\r\n                    <p>By continuing, I agree to the terms of use & privacy policy</p>\r\n                </div>\r\n                {currentState === 'Login' ? (\r\n                    <p>Create a new Account? <span onClick={() => setCurrentState(\"Sign Up\")}>Click here</span></p>\r\n                ) : (\r\n                    <p>Already have an account? <span onClick={() => setCurrentState(\"Login\")}>Login here</span></p>\r\n                )}\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}